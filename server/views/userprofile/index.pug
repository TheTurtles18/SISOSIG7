extends ../layout

block append content
  h2.page-header  User Page 
  div(div='div', ng-app='myApp', ng-controller='myCtrl')
    div
      #miniHeader
      h4 {{firstname}} 
      h4(ng-bind='lastname')
      h4(ng-bind='email')

    script.
      console.log("cookie kevin");
      console.log(getCookie("officialId"));
      var app = angular.module('myApp', []);
      app.controller('myCtrl', function($scope, $http) {
        //- console.log("hello user Id");
        //- console.log(getCookie("newCookie"));
        console.log("App Controller");
        $http({
          method : "GET",
          url : 'api/fblogged/'+getCookie("officialId")
        })
        .then(function(response) {
          $scope.firstname = response.data.First;
          console.log("Test body");
          console.log(response);
          console.log(response.data.First);
          $scope.lastname = response.data.Last;  
          $scope.username = response.data.Username;  
          $scope.email = response.data.Email;  
          
         });

        $scope.postArray = [];
        $scope.postLoader = function() {
          console.log("Josh test");
          $http.get('/api/posts/').then(function(response) {
            $scope.postArray = response.data
            console.log($scope.postArray.length);
          }).catch(function(err) {
            $log.debug(err);
          });
        }
        $scope.postLoader();  
      });